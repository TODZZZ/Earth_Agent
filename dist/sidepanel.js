import{r,j as e,c as x,R as p}from"./globals.js";const b=()=>{const[s,n]=r.useState([]),[o,l]=r.useState(""),[i,c]=r.useState(!1),d=r.useRef(null);r.useEffect(()=>{var t;(t=d.current)==null||t.scrollIntoView({behavior:"smooth"})},[s]);const u=async t=>{if(t.preventDefault(),!o.trim())return;const h={id:Date.now().toString(),role:"user",content:o.trim()};n(a=>[...a,h]),l(""),c(!0);try{setTimeout(()=>{const a={id:(Date.now()+1).toString(),role:"assistant",content:"This is a mock response. I will integrate with LangGraph agents in the next phase.",code:`var image = ee.Image("USGS/SRTMGL1_003");
var elevation = image.select("elevation");
Map.setCenter(-112.8598, 36.2841, 9); // Center on the Grand Canyon
Map.addLayer(elevation, {min: 0, max: 4000, palette: ["blue", "green", "yellow", "red"]}, "Elevation");`};n(m=>[...m,a]),c(!1)},1e3)}catch(a){console.error("Error processing message:",a),c(!1)}},g=t=>{console.log("Running code in Earth Engine:",t),alert("Code execution will be implemented in Phase 2")};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1 overflow-auto mb-4",children:[s.map(t=>e.jsxs("div",{className:`mb-4 p-3 rounded-lg ${t.role==="user"?"bg-blue-100 ml-8":"bg-gray-100 mr-8"}`,children:[e.jsx("div",{className:"font-semibold mb-1",children:t.role==="user"?"You":"Earth Agent"}),e.jsx("div",{className:"whitespace-pre-wrap",children:t.content}),t.code&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"bg-gray-800 text-gray-200 p-3 rounded-md overflow-x-auto",children:e.jsx("pre",{children:e.jsx("code",{children:t.code})})}),e.jsx("button",{onClick:()=>g(t.code),className:"mt-2 px-3 py-1 bg-green-600 text-white rounded-md hover:bg-green-700 transition-colors",children:"Run Code"})]})]},t.id)),i&&e.jsx("div",{className:"flex justify-center items-center my-4",children:e.jsx("div",{className:"animate-pulse text-gray-500",children:"Earth Agent is thinking..."})}),e.jsx("div",{ref:d})]}),e.jsxs("form",{onSubmit:u,className:"flex",children:[e.jsx("input",{type:"text",value:o,onChange:t=>l(t.target.value),placeholder:"Ask Earth Agent something...",className:"flex-1 border rounded-l-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:i}),e.jsx("button",{type:"submit",disabled:i||!o.trim(),className:"bg-blue-600 text-white px-4 py-2 rounded-r-md hover:bg-blue-700 transition-colors disabled:bg-gray-400",children:"Send"})]})]})},f=({isLoggedIn:s,onLoginChange:n})=>{const o=async()=>{try{s?(console.log("Logging out..."),n(!1)):(console.log("Logging in with Google..."),n(!0))}catch(l){console.error("Login error:",l)}};return e.jsx("button",{onClick:o,className:"px-4 py-2 rounded-md bg-blue-600 text-white hover:bg-blue-700 transition-colors",children:s?"Logout":"Login with Google"})},j=()=>{const[s,n]=r.useState(!1);return e.jsxs("div",{className:"flex flex-col h-screen",children:[e.jsxs("header",{className:"p-4 border-b flex justify-between items-center",children:[e.jsx("h1",{className:"text-xl font-bold",children:"Earth Agent"}),e.jsx(f,{isLoggedIn:s,onLoginChange:n})]}),e.jsx("main",{className:"flex-1 overflow-auto p-4",children:e.jsx(b,{})})]})};x.createRoot(document.getElementById("root")).render(e.jsx(p.StrictMode,{children:e.jsx(j,{})}));console.log("Earth Agent sidepanel loaded");
